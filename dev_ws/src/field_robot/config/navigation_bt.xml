<root main_tree_to_execute="MainTree">
  <BehaviorTree ID="MainTree">
    <ContinuousSequence>
      <ParallelCheck success_threshold="1" failure_threshold="2">
        <FrontEmpty/>
        <PipelineSequence>
          <RateController hz="10.0">
            <Sequence>
              <ComputeGoalInRow goal="{goal}"/>
              <GoalUpdater input_goal="{goal}" output_goal="{updated_goal}">
                <ComputePathToPose goal="{updated_goal}" path="{path}" planner_id="GridBased"/>
              </GoalUpdater>
            </Sequence>
          </RateController>
          <FollowPath path="{path}"/>
        </PipelineSequence>
      </ParallelCheck>
      <SequenceStar>
        <ComputeGoalHeadland goal="{goal}"/>
        <PipelineSequence>
          <RateController hz="10.0">
            <ComputePathToPose goal="{goal}" path="{path}" planner_id="GridBased"/>
          </RateController>
          <FollowPath path="{path}"/>
        </PipelineSequence>
        <ComputeGoalHeadlandFollow goal="{goal}"/>
        <PipelineSequence>
          <RateController hz="10.0">
            <ComputePathToPose goal="{goal}" path="{path}" planner_id="GridBased"/>
          </RateController>
          <FollowPath path="{path}"/>
        </PipelineSequence>
      </SequenceStar>
      <Sequence>
        <ComputeGoalInRow goal="{goal}"/>
        <GoalUpdater input_goal="{goal}" output_goal="{updated_goal}">
          <ComputePathToPose goal="{updated_goal}" path="{path}" planner_id="GridBased"/>
        </GoalUpdater>
      </Sequence>
    </ContinuousSequence>
                          <!--<IndefiniteRepeat>
                            <PipelineSequence>
                              <RateController hz="10.0">
                                <GoalUpdater input_goal="{goal}" output_goal="{updated_goal}">
                                  <ComputePathToPose goal="{updated_goal}" path="{path}" planner_id="GridBased"/>
                                </GoalUpdater>
                              </RateController>
                              <FollowPath path="{path}"/>
                            </PipelineSequence>
                          </IndefiniteRepeat>-->
  </BehaviorTree>
</root>
<!--<root main_tree_to_execute="MainTree">
  <BehaviorTree ID="MainTree">
    <ContinuousSequence>
      <Fallback name="in_row">
        <FrontEmpty/>
        <PipelineSequence>
          <ComputeGoalInRow goal="{goal}"/>
          <ComputePathToPose goal="{goal}" path="{path}"/>
          <FollowPath path="{path}"/>
        </PipelineSequence>
      </Fallback>
      <PublishTurnInformation remaining_rows="{remaining_rows}" last_ron_pose="{last_ron_pose}" turn_direction="{turn_direction}"/>
      <Fallback name="leaving_row">
        <CompletedLeavingRow/>
        <SequenceStar>
          <ComputeBasedGoalLeavingRow goal="{goal}" remaining_rows="{remaining_rows}" last_ron_pose="{last_ron_pose}" turn_direction="{turn_direction}"/>
          <PipelineSequence>
            <ComputePathToPose goal="{goal}" path="{path}"/>
            <FollowPath path="{path}"/>
          </PipelineSequence>
        </SequenceStar>
      </Fallback>
      <ContinuousSequence name="out_of_row">
        <ComputeBasedGoalOutOfRow goal="{goal}" remaining_rows="{remaining_rows}" last_ron_pose="{last_ron_pose}" turn_direction="{turn_direction}"/>
        <Fallback>
          <NewGoalComputable remaining_rows="{remaining_rows}" last_ron_pose="{last_ron_pose}" turn_direction="{turn_direction}"/>
          <PipelineSequence>
            <ComputePathToPose goal="{goal}" path="{path}"/>
            <FollowPath path="{path}"/>
          </PipelineSequence>
        </Fallback>
      </ContinuousSequence>
    </ContinuousSequence>
  </BehaviorTree>
</root>-->
<!--<root main_tree_to_execute="MainTree">
  <BehaviorTree ID="MainTree">
    <ParallelCheck success_threshold="1" failure_threshold="2">
      <ContinuousSequence>
        <ParallelCheck success_threshold="2" failure_threshold="2">
          <FrontEmpty/>
          <RateController hz="10.0">
            <ComputeGoalInRow goal="{goal}"/>
          </RateController>
        </ParallelCheck>
        <SequenceStar>
          <ComputeGoalHeadland goal="{goal}"/>
          <PipelineSequence>
            <RateController hz="10.0">
              <ComputePathToPose goal="{goal}" path="{path}" planner_id="GridBased"/>
            </RateController>
            <FollowPath path="{path}"/>
          </PipelineSequence>
          <ComputeGoalHeadlandFollow goal="{goal}"/>
          <PipelineSequence>
            <RateController hz="10.0">
              <ComputePathToPose goal="{goal}" path="{path}" planner_id="GridBased"/>
            </RateController>
            <FollowPath path="{path}"/>
          </PipelineSequence>
        </SequenceStar>
      </ContinuousSequence>
      <IndefiniteRepeat>
        <PipelineSequence>
          <RateController hz="10.0">
            <GoalUpdater input_goal="{goal}" output_goal="{updated_goal}">
              <ComputePathToPose goal="{updated_goal}" path="{path}" planner_id="GridBased"/>
            </GoalUpdater>
          </RateController>
          <FollowPath path="{path}"/>
        </PipelineSequence>
      </IndefiniteRepeat>
    </ParallelCheck>
  </BehaviorTree>
</root>-->
